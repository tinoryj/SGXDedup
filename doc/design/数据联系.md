*  数据类型

  * SGX msg01

  * SGX msg2

  * SGX msg3

  * SGX msg4

  * SGX signed HashList

    > 用于POW客户端向POW服务端传递签名的hash

    ```c
    struct sgxsignedhash{
        char signature[128];
        vector<string>hash;
    }
    ```

    

  * Required ChunkLID

    > 用于服务器向客户端告知应传的unique数据块

    ```
    vector<int>chunkID;
    ```

  * chunkList

    > 用于网络间的数据块传输以及DedupCore 到 StorageCore 之间的数据块传输

    ```c
    struct chunkList{
     	vector<string>FP;
        vector<string>data;
    }
    ```

    

  * NetWork Msg

    > 用于网络数据传输，标识数据类型与客户，存在与两端的dataSR和retriver

    ```c
    struct network_msg{
        int type;			//数据类型，定义与protocol.hpp
        int cid;			//用户标识，服务器置为-1
        string data;		//携带的数据
    }
    ```

    

  * EPOLL Msg

    > 用于epoll 的数据结构

    ```c
    struct epoll_msg{
        int fd,epfd;		//用于注册文件描述符
        string data;		//携带的数据
    }
    ```

    

  * FileRecipe

    ```c
    struct fileRecipe{
        string _fileName;		// =hash(origin name)
        uint32_t _fileSize;		// bytes
        //uint32_t _chunkCnt;
        string _createData;
        struct body{
            uint32_t _chunkID;
            uint32_t _chunkSize;
            char _chunkHash[128];
        };
        vector<body>_body;
    };
    ```

  * key Recipe

    ```c
    struct keyRecipe{
        string _filename;	// =hash(origin name)
        uint32_t _fileSize;	// bytes
        string _createData;
        struct body{
            uint32_t _chunkID;
            char _chunkHash[128];
            string _chunkKy;
        };
        vector<body>_body;
    };
    ```

  * Recipe

    > 拼接file Recipe 和 key Recipe

    ```c
    struct recipe{
        filerecipe f;
        keyrecipe k;   
    }
    ```

* 数据流

  <彩图>